# DraftPractice

Прототип симулятора Captains Mode драфта Dota 2. Проект разделён на серверную часть (Go) и будущий клиент (React/TypeScript планируется на следующих этапах).

> ℹ️ Актуальный код живёт в ветке `main`. Перед публикацией изменений убедитесь, что локальная ветка синхронизирована с удалённой `main` (`git pull --rebase`), чтобы избежать конфликтов при пуше.

## Структура репозитория

```
/backend
  /cmd/draft-api        # исполняемый HTTP-сервис
  /internal/draft       # доменные сущности и сервис управления сессиями
  /internal/heroes      # каталог героев и интеграция с OpenDota
  /internal/server      # HTTP-слой
```

## Обновление данных героев

При старте `draft-api` инициирует загрузку свежей информации о героях с эндпоинта [OpenDota heroStats](https://api.opendota.com/api/heroStats) и сохраняет её в памяти. Далее данные автоматически обновляются каждые 24 часа в фоне, а при сбоях продолжает использоваться последняя успешная версия кэша.

## Запуск API

```bash
cd backend
go run ./cmd/draft-api
```

Сервис стартует на `http://localhost:8080` и предоставляет следующие эндпоинты:

- `GET /health` — проверка состояния.
- `GET /api/heroes` — список актуальных героев (подтягивается из OpenDota и кешируется).
- `POST /api/sessions` — создание новой сессии драфта. Пример тела:
  ```json
  {
    "radiant": "Team Radiant",
    "dire": "Team Dire"
  }
  ```
- `GET /api/sessions/{id}` — получение информации о сессии.

Данные и логика пока работают в памяти — этого достаточно для дальнейшего наращивания функциональности и подключения фронтенда.
